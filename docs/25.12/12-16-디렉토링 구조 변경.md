## Todo 프로젝트 리팩터링 정리
### 1. 리팩터링 목적
- 이번 리팩터링의 목적은 기능 추가가 아니라 다음에 집중
    - 컴포넌트 책임을 명확히 분리한다.
    - 상태 관리 흐름을 단순하게 만든다.
    - 이후 Edit/ Filter 기능 확장을 고려한 구조로 만든다.
    - 새로고침 시 데이터가 유지되도록 안정화한다.

### 2. 리팩터링 전 문제점
- 컴포넌트 책임이 모호함
    - `TodoInput.jsx` 가 단순 `checkbox`만 담당
    - 실제 역할은 `TodoItem`의 일부 인데 파일로 분리되어 있음 
    - `props`(`item`, `toggleTodo`)가 불필요하게 쪼개짐

- 구조 확장에 불리함
    - 수정(Edit) 기능 추가시
        - `checkbox`/ `text`/ `edit` UI가 서로 다른 컴포넌트로 흩어질 가능성
    - Todo 한 줄의 책임 단위가 명확하지 않음

- 새로고침 시 데이터 유실
    - `localStorage`에 저장은 되지만 새로고침 시 빈 배열로 덮어지는 문제 발생

### 3. 리팩터링 후 폴더 구조 

```css
    src/
    ├─ pages/
    │  └─ TodoPage.jsx
    ├─ components/
    │  └─ todo/
    │     ├─ TodoForm.jsx
    │     ├─ TodoList.jsx
    │     └─ TodoItem.jsx
    ├─ hooks/
    │  └─ useTodos.js
    ├─ App.jsx
    └─ main.jsx
```

- 구조 설계 기준
    - page: 화면 단위 조립
    - components/ todo: Todo 도메인 컴포넌트
    - hooks: 상태 + 비즈니스 로직

### 4. 컴포넌트 역할 정의
- TodoPage.jsx
    - 페이지 진입점
    - Todo 관련 컴포넌트 조립만 담당
    - 상태 로직 직접 처리하니 않음

- TodoForm.jsx
    - 입력값 관리
    - Todo 추가 트리거 역할
    - 상태는 로컬에서만 관리

- TodoList.jsx
    - `todos` 배열을 받아서 `map`렌더링
    - 로직 없음 (순수 UI)

- TodoItem.jsx
    - Todo 한 줄 전체를 책임
        - `checkbox`
        - 텍스트 표시
        - 삭제 버튼
    - TodoInput.jsx의 `checkbox`로직을 흡수

### 5. 상태 관리(useTodos) 리팩터링
- 역할
    - `todos` 상태 관리
    - CRUD 로직 제공
    - `localStorage` 동기화

- 새로고침 시 데이터 사라지던 원인 
    - 초기 렌더 시 `todos = []`
    - 저장 `useEffect`가 먼저 실행되어 `localStorage`가 빈 배열로 덮어써짐

- 해결 방법
    - 초기 로딩 완료 이후에만 저장
    - `useRef`로 로드 완료 여부 관리
    ```javascript
        const didLoad = useRef(false);

        useEffect(() => {
            // localStorage 로드
            didLoad.current = true;
        }, []);

        useEffect(() => {
            if (!didLoad.current) {return;}
            localStorage.setItem("todos", JSON.stringify(todos)); 
        }, [todos]);

    ```

### 6. 리팩터링 핵심 결정 사항
- TodoInput.jsx 제거
    - `checkbox`는 `TodoItem`의 일부로 판단
    - 컴포넌트 분리 기준을 기능 -> 책임 설정

- 상태 로직은 hook으로 집중
    - 페이지/ 컴포넌트에서 상태 로직 제거
    - 테스트 및 확장 용이